(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const O="/DountGame/assets/fon-C9ztm5Gh.svg",x="/DountGame/assets/dount-Xy_utL02.svg";let m=[],d=[],r=[],u=0,v=!1;const h=[{x:320,y:40},{x:450,y:20},{x:580,y:50},{x:720,y:90},{x:270,y:120},{x:410,y:140},{x:540,y:180},{x:650,y:150}];let y=h.length,q=Math.ceil(h.length/2),g,C,b,w,P,i,l;$(document).ready(function(){g=$("#app"),E()});function E(){g.html(`
      <div class="title">Click on the donuts to pack a group of 2</div>
      <div class="boxes-container"></div>
      <div class="game-area"></div>
      <img src="${O}" class="fon"/>
      <div class="question-section">
        <div class="question-text">
          How many donuts in total?
          <input type="text" class="answer-input" maxlength="2" />
        </div>
        <button class="done-button">Done</button>
      </div>
    `),C=$(".title"),b=$(".boxes-container"),w=$(".game-area"),P=$(".question-section"),i=$(".answer-input"),l=$(".done-button"),I(),T(),F()}function I(){for(let e=0;e<q;e++){let t=$('<div class="box"></div>');e===0&&t.addClass("visible");let s=$(`<div class="box-label">${e*2+1}       ${e*2+2}</div>`);t.append(s),b.append(t),d.push({element:t,donuts:[],isFull:!1})}}function T(){h.forEach((e,t)=>{let s=$(`
            <img src="${x}" class="donut" style="left:${e.x}px; top:${e.y}px;"/>
        `);w.append(s),m.push({id:t,element:s,x:e.x,y:e.y,selected:!1})})}function F(){m.forEach(e=>{e.element.on("click",()=>M(e))}),i.on("input",G),l.on("click",N)}async function M(e){if(v||e.selected||r.length>=2)return;e.selected=!0,e.element.addClass("selected"),r.push(e.id);let t=m.filter(s=>!s.selected).length;(r.length===2||r.length===1&&t===0)&&(v=!0,await R(),r=[],v=!1,u>=Math.ceil(y/2)&&A())}function R(){return new Promise(async e=>{let t=d[u],s=t.element[0].getBoundingClientRect(),a=g[0].getBoundingClientRect(),n=s.left-a.left+s.width/2-30,o=s.top-a.top+s.height/2-30,c=r.map((f,D)=>{let p=m[f].element,B=D===0?-25:25;return new Promise(L=>{p.addClass("flying"),p.css({left:n+B+"px",top:o+"px",transform:"scale(0.6)"}),setTimeout(()=>{p.hide(),t.donuts.push(f),L()},500)})});await Promise.all(c),t.isFull=t.donuts.length>=1,t.element.addClass("closed"),r.forEach(()=>{let f=$(`
                <img src="${x}" class="donut" style="position:relative; width:35px; height:35px;"/>
            `);t.element.append(f)}),await S(),e()})}function S(){return new Promise(e=>{u++,u<d.length&&d[u].element.addClass("visible"),setTimeout(e,1e3)})}function A(){setTimeout(()=>{C.addClass("hidden"),P.addClass("visible")},1e3)}function G(){i.val().trim()!==""?l.addClass("active").css("cursor","pointer"):l.removeClass("active").css("cursor","not-allowed"),i.removeClass("error"),l.removeClass("error")}async function N(){let e=i.val().trim();if(e==="")return;parseInt(e)===y?(l.addClass("success"),l.removeClass("active").css("cursor","not-allowed")):(l.addClass("error"),i.addClass("error"),await X(),setTimeout(()=>{i.removeClass("error").val(""),l.removeClass("error active").css("cursor","not-allowed"),i.focus()},1e3))}function X(){return new Promise(async e=>{let t=d.filter(s=>s.isFull);for(let s=0;s<t.length;s++)await new Promise(a=>{setTimeout(()=>{t[s].element.find(".box-label").addClass("visible"),a()},s*500)});e()})}
